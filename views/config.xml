<?xml version="1.0" encoding="UTF-8" ?>
<openerp>
    <data>
        <template id="config_page" name ="configpage">
            <script src="http://code.jquery.com/jquery-1.5.1.min.js"></script>
            <script src="/IOT_web/static/lib/jquery/lc_switch.js" type="text/javascript"></script>
            <link rel="stylesheet" href="/IOT_web/static/src/css/lc_switch.css"/>
            <link href="http://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css"/>
            <script type="text/javascript">
		        $(document).ready(function(e) {
		            $('form').submit(function(e)
                        {
                            e.preventDefault();
                            name=$('#name').val();
                            channel=$('#channel').val();
                                $.ajax({
								    type: 'post',
								    url: '/create_record',
								    data: { 
								        'name': name, 
								        'channel': channel },
									}).done(function() {
                                       location.reload();
                                });
                     });
                     $(".remove").click(function() 
                     {
                         $.ajax({
                            url: "/delete_record",
                            method:"POST",
                            data: {'item_id':$(this).data('item_id')},
                            }).done(function() {
                               alert ('Are you sure you want to delete??');
                               location.reload();
                            });
                    });
               });
            </script>
            <style>
	            .dynatable {
	                border: solid 1px #000; 
	                border-collapse: collapse;
	            }
	            .dynatable th,
	            .dynatable td {
	                border: solid 1px #000; 
	                padding: 2px 10px;
	                width: 170px;
	                text-align: center;
	            }
	            .dynatable .prototype {
	                display:none;
	            }
            </style>
            <t t-call="IOT_web.content">
                <h1>Form Config</h1>
                <table class="dynatable">
	                <thead>
	                    <tr>
	                        <th>Device</th>
                            <th>Pin</th>
	                        <th>Action</th>
	                    </tr>
	                </thead>
	                <t t-foreach="key" t-as="item">
                        <tbody>
                            <tr>
                                <td><t t-esc="item.get('name')"></t> </td>
                                <td><t t-esc="item.get('channel')"></t> </td>
                                <td><img class="remove"  t-att-data-item_id="item.get('id')" src="/IOT_web/static/src/images/Delete.png"> 
                                     </img></td>
                            </tr>
                        </tbody>
                    </t>
                    </table>
                    <form method="post" action="/config" name="form">
                        <div class="form_settings">
                            <p><span>Name</span><input type="text" name="name" id="name"/></p>
                            <p><span>Channel</span>
                            <select id="channel" name="channel">
	                            <t t-if="not 'one' in res"><option value="one">1</option></t>
	                            <t t-if="not 'two' in res"><option value="two">2</option></t>
	                            <t t-if="not 'three' in res"><option value="three">3</option></t>
	                            <t t-if="not 'four' in res"><option value="four">4</option></t>
	                            <t t-if="not 'five' in res"><option value="five">5</option></t>
	                            <t t-if="not 'six' in res"><option value="six">6</option></t>
	                            <t t-if="not 'seven' in res"><option value="seven">7</option></t>
	                            <t t-if="not 'eight' in res"><option value="eight">8</option></t>
	                        </select>
                        </p>
                        <p style="padding-top: 15px"> 
                          <input class="submit" type="submit" name="name" value="Config" />
                        </p>
                    </div>
                </form>
            </t>
        </template>
    </data>
</openerp>